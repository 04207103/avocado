language: python
python:
    - "2.7"

branches:
    only:
        - master

install:
    - pip install sphinx tox pylint autopep8 flexmock
    - pip install inspektor
    - pip install -r requirements.txt

script:
    - ./unittests/runtests.py -c .nose.cfg
    - inspekt lint
    - inspekt style
    - make -C docs html
    - ./scripts/avocado run "sleeptest sleeptest"
    - ./scripts/avocado run "sleeptest failtest sleeptest" || test $? -eq 1
